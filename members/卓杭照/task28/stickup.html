<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>stickup1</title>
<style>

	#header{
		height: 100px;
		background-color: red;
		text-align: center;
		line-height: 3;
	}	
	#nav{
		background-color: blue;
		margin-top: 10px;
	}
	#container{
		padding: 10px;
		min-height: 800px;
		background-color: #ccc;
	}
	.aside{
		float: left;
		height: 300px;
		width: 100px;
		background-color: green;
	}
	.main{
		float: right;
		background-color: white;
		min-height: 800px;
		width: 1076px;
		padding-left: 5px;
	}
	#footer{
		height: 50px;
		background-color: #c29595;
	}
</style>
</head>

<body>
	<div id="header">header</div>
	<div id="nav">nav</div>
	<div id="container">
		<div class="aside">aside</div>
		<div class="main">main</div>
	</div>
	<div id="footer">footer</div>

	<script src="http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
 	<script>

 	$.fn.stickup = function(){
		var $cur = $(this),
			isFixed = false,
			$height = $cur.height(),
			$width = $cur.width(),
			$offsetTop = $cur.offset().top,
			$offsetLeft = $cur.offset().left;
 	
// 把目标元素克隆一个用于占位，否则目标元素 fixed后会脱离文档流，页面会跳动
		var $curClone = $cur.clone()
						.css({
							opacity:0,
							display:'none'
							})
						.insertBefore($cur)

		$(window).on('scroll',function(){
			var $scrollTop = $(window).scrollTop()

			if($scrollTop >= $offsetTop){
				if(!isFixed)setFixed()
										// 没有就添加，有就去掉 
				}else{

				if(isFixed)unsetFixed()
			}
		})

		function setFixed(){
				$cur.css({
					position:'fixed',
					top:0,
					left:$offsetLeft,
					width:$width,
					margin:0,
					'z-index':999
				})
				isFixed = true
			$navClone.show()
		}
		function unsetFixed(){
			$cur.removeAttr('style')
			$curClone.hide()
			isFixed = false
		}
	}

$('#nav').stickup()


</script>
</body>
</html>