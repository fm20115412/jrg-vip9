<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>task20</title>
  </head>
  <body>
    <script type="text/javascript">
    // 1.下面的代码输出是多少？修改代码让 fnArr[i]() 输出 i 。使用两种以上方法
      var fnArr = [];
      for (var i = 0; i < 10; i ++) {
          fnArr[i] =  function(){
              return i;
          };
      }
      console.log( fnArr[3]() );  // 10 此时fnArr[3] = function() { return i; },此时 i= 10，所以输出10

      // 可通过立即调用函数使得函数满足题意
      // 方法一
      var fnArr = [];
      for (var i = 0; i < 10; i++) {
        fnArr[i] = (function (val) {
          return function () {
            return val;
          };
        })(i)
      }
      console.log( fnArr[3]() );

      // 方法二
      var fnArr = [];
      for (var i = 0; i < 10; i++) {
        (function (n) {
          fnArr[i] = function () {
            return n;
          };
        })(i)
      }
      console.log( fnArr[3]() );

    // 2.使用闭包封装一个汽车对象，可以通过如下方式获取汽车状态





    // 3.写一个函数使用setTimeout模拟setInterval的功能
      var i = 0;
      function intv() {
        setTimeout ( function () {
          console.log (i++);
          inTv();
        }, 1000);
      }

    // 4.写一个函数，计算setTimeout最小时间粒度
      function minTime() {
        var s = Date.now();
        setTimeout(function(){
          var e = Date.now();
          console.log (e-s);
        }, 1000);
      }
      minTime()

    // 5.下面这段函数代码输出结果是什么？为什么？
      var a = 1;
      setTimeout(function(){
          a = 2;
          console.log(a);
      }, 0);
      var a ;
      console.log(a);
      a = 3;
      console.log(a);
      // 1
      // 3
      // 2
      // 这段代码执行时的顺序为：
      var a = 1;
      var a;
      console.log(a);
      a = 3;
      console.log(a);
      a = 2;
      console.log(a);

    // 6.下面这段代码输出结果是？ 为什么？
      var flag = true;
      setTimeout(function(){
        flag = false;
      },0)
      while(flag){}
      console.log(flag);
      // 无限 while 循环
      // 因为setTimeout脱离任务序列，所以while执行前flag始终为true，无限 while循环

    </script>
  </body>
</html>
